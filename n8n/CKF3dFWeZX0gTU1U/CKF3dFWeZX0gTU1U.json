{"active":false,"connections":{},"name":"YouTube-Transkript für Notion 0.9.1","nodes":[{"name":"Manueller Start","parameters":{},"position":[-544,128],"type":"n8n-nodes-base.manualTrigger","typeVersion":1},{"name":"Kanal Konfiguration","parameters":{"options":{}},"position":[-368,128],"type":"n8n-nodes-base.set","typeVersion":3},{"name":"YouTube Videos abrufen","parameters":{},"position":[-192,128],"type":"n8n-nodes-youtube.youtube","typeVersion":1},{"name":"Video Details","parameters":{},"position":[0,0],"type":"n8n-nodes-youtube.youtube","typeVersion":1},{"name":"Transkript extrahieren","parameters":{"options":{"timeout":30000},"url":"=https://api.youtubetranscript.com/?video_id={{ $json.id.videoId }}"},"position":[0,144],"type":"n8n-nodes-base.httpRequest","typeVersion":4.1},{"name":"Transkript validieren","parameters":{"conditions":{"combinator":"and","conditions":[{"leftValue":"={{ $json.transcript || $json.text || '' }}","operator":{"operation":"notEmpty","type":"string"},"rightValue":""},{"leftValue":"={{ ($json.transcript || $json.text || '').length }}","operator":{"operation":"gt","type":"number"},"rightValue":"100"}],"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"}},"options":{}},"position":[176,144],"type":"n8n-nodes-base.if","typeVersion":2},{"name":"Daten zusammenführen","parameters":{"jsCode":"// Alle Daten aus vorherigen Nodes sammeln\nconst searchData = $('youtube-search').item(0).json;\nconst videoDetails = $('video-details').item(0).json;\nconst transcriptData = $('get-transcript').item(0).json;\nconst config = $('config').item(0).json;\n\n// Transkript extrahieren und bereinigen\nlet rawTranscript = transcriptData.transcript || transcriptData.text || '';\nif (Array.isArray(transcriptData)) {\n  rawTranscript = transcriptData.map(item => item.text || item.content || '').join(' ');\n}\n\n// Text bereinigen und formatieren\nconst cleanTranscript = rawTranscript\n  .replace(/\\[.*?\\]/g, '')           // [Musik], [Applaus] etc.\n  .replace(/\\(.*?\\)/g, '')           // (inaudible) etc.\n  .replace(/\\s+/g, ' ')              // Mehrfache Leerzeichen\n  .replace(/\\n+/g, '\\n\\n')           // Absätze formatieren\n  .trim();\n\n// Video-Dauer aus ISO 8601 Format parsen (PT4M13S -> 4:13)\nfunction parseDuration(duration) {\n  if (!duration) return 'Unknown';\n  const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n  if (!match) return duration;\n  \n  const hours = parseInt(match[1] || 0);\n  const minutes = parseInt(match[2] || 0);\n  const seconds = parseInt(match[3] || 0);\n  \n  if (hours > 0) {\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  } else {\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n}\n\n// Tags aus Video-Titel und Beschreibung extrahieren\nfunction extractTags(title, description) {\n  const tags = [];\n  const text = (title + ' ' + description).toLowerCase();\n  \n  // AI/KI-bezogene Keywords\n  if (text.match(/(ai|artificial intelligence|chatgpt|gpt|claude|llm|machine learning|automation)/)) {\n    tags.push('AI');\n  }\n  \n  // Marketing Keywords\n  if (text.match(/(marketing|sales|business|growth|strategy|revenue)/)) {\n    tags.push('Marketing');\n  }\n  \n  // Tutorial Keywords\n  if (text.match(/(tutorial|how to|guide|step by step|walkthrough|setup)/)) {\n    tags.push('Tutorial');\n  }\n  \n  // Tool Keywords\n  if (text.match(/(tool|software|app|platform|api|integration)/)) {\n    tags.push('Tools');\n  }\n  \n  return tags.length > 0 ? tags : ['AI']; // Default fallback\n}\n\nreturn {\n  // Video Grunddaten\n  videoId: searchData.id.videoId,\n  title: videoDetails.snippet.title,\n  channelTitle: videoDetails.snippet.channelTitle,\n  authorName: config.authorName,\n  publishedAt: videoDetails.snippet.publishedAt,\n  description: videoDetails.snippet.description,\n  \n  // Statistiken\n  viewCount: parseInt(videoDetails.statistics?.viewCount || 0),\n  likeCount: parseInt(videoDetails.statistics?.likeCount || 0),\n  duration: parseDuration(videoDetails.contentDetails?.duration),\n  \n  // URLs\n  videoUrl: `https://youtube.com/watch?v=${searchData.id.videoId}`,\n  thumbnailUrl: videoDetails.snippet?.thumbnails?.high?.url || '',\n  \n  // Transkript\n  cleanTranscript: cleanTranscript,\n  transcriptLength: cleanTranscript.length,\n  wordCount: cleanTranscript.split(' ').length,\n  estimatedReadingTime: Math.ceil(cleanTranscript.split(' ').length / 200),\n  \n  // Auto-Tags\n  autoTags: extractTags(videoDetails.snippet.title, videoDetails.snippet.description)\n};","mode":"runOnceForEachItem"},"position":[368,48],"type":"n8n-nodes-base.code","typeVersion":2},{"name":"DeepL Übersetzen","parameters":{"additionalFields":{},"text":"={{ $json.cleanTranscript }}","translateTo":"DE"},"position":[544,48],"type":"n8n-nodes-base.deepL","typeVersion":1},{"name":"Notion Eintrag erstellen","parameters":{"databaseId":"22f31cc6-fd56-80f8-9a68-da6f99f3dade","options":{},"resource":"databasePage"},"position":[720,48],"type":"n8n-nodes-base.notion","typeVersion":2},{"name":"Threema Benachrichtigung","parameters":{},"position":[896,48],"type":"n8n-nodes-base.threema","typeVersion":1}],"settings":{"availableInMCP":false,"callerPolicy":"workflowsFromSameOwner","executionOrder":"v1"}}
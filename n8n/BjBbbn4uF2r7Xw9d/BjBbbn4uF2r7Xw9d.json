{"active":false,"connections":{"Daten aufbereiten":{"main":[[{"index":0,"node":"HTTP Request","type":"main"}]]},"Hedy Gamma API":{"main":[[{"index":0,"node":"Message a model","type":"main"}]]},"Message a model":{"main":[[{"index":0,"node":"Daten aufbereiten","type":"main"}]]}},"name":"Hedy Transkript nach Gamma","nodes":[{"name":"Hedy Gamma API","parameters":{"httpMethod":"POST","options":{},"path":"hedy-to-gamma-a2863007-e032-4ba6-b0ea-bea6eb1da57b"},"position":[2976,576],"type":"n8n-nodes-base.webhook","typeVersion":2.1,"webhookId":"a2863007-e032-4ba6-b0ea-bea6eb1da57b"},{"credentials":{"anthropicApi":{"name":"API Anthropic"}},"name":"Message a model","parameters":{"messages":{"values":[{"content":"=Rolle: Du bist ein Formatierungs-Assistent für Präsentationen in Gamma.\nAufgabe: Bereite den folgenden Text unverändert für den Import in Gamma auf.\n{{ $json.body.meeting_minutes }}\n\nRegeln (streng einhalten)\nDer Textinhalt darf in keiner Weise verändert werden\nnichts kürzen\nnichts umformulieren\nnichts hinzufügen\nnichts interpretieren\nStruktur & Trennung\n# kennzeichnet die Titelfolie. Füge auf der Titelfolie bitte das Datum im Format dd.mm.yyyy aus {{ $json.body.startTime }} ein\nJedes ## kennzeichnet den Beginn einer neuen Folie (Karte)\nVor jedem ## muss exakt folgende Trennsequenz eingefügt werden:\n---\n(also: Zeilenumbruch, drei Bindestriche, Zeilenumbruch → \\n---\\n)\nGamma-Konvention\nDie Trennzeichen --- sind die einzigen erlaubten Karten-Separatoren\nJede Trennung erzeugt exakt eine neue Karte in Gamma\nnumCards wird nicht verwendet\nMarkdown beibehalten\nÜberschriften (#, ##)\nBullet Points (-)\nAbsätze\nbleiben exakt wie im Original\nAusgabe\nGib nur den formatierten Text aus\nKeine Erklärungen\nKein zusätzlicher Kommentar\nKein Codeblock um den gesamten Text"}]},"modelId":{"__rl":true,"cachedResultName":"claude-3-5-haiku-20241022","mode":"list","value":"claude-3-5-haiku-20241022"},"options":{}},"position":[3232,576],"type":"@n8n/n8n-nodes-langchain.anthropic","typeVersion":1},{"name":"HTTP Request","parameters":{"headerParameters":{"parameters":[{"name":"X-API-KEY","value":"API-Key-aus-Gamma"}]},"jsonBody":"={\n  \"inputText\": {{ $json.text }},\n  \"textMode\": \"preserve\",\n  \"format\": \"presentation\",\n  \"themeName\": \"2se08isfynkzu18\",\n  \"cardSplit\": \"inputTextBreaks\",\n  \"additionalInstructions\": \"Verändere den Text nicht, erfinde nichts hinzu.\",\n  \"exportAs\": \"pptx\",\n  \"textOptions\": {\n    \"amount\": \"detailed\",\n    \"tone\": \"professional, inspiring\",\n    \"audience\": \"C-level managememt\",\n    \"language\": \"de\"\n  },\n  \"imageOptions\": {\n    \"source\": \"noImages\"\n  },\n  \"cardOptions\": {\n    \"dimensions\": \"16x9\"\n  },\n  \"sharingOptions\": {\n    \"workspaceAccess\": \"view\",\n    \"externalAccess\": \"noAccess\"\n  }\n}","method":"POST","options":{},"sendBody":true,"sendHeaders":true,"specifyBody":"json","url":"https://public-api.gamma.app/v0.2/generations"},"position":[3792,576],"type":"n8n-nodes-base.httpRequest","typeVersion":4.3},{"name":"Daten aufbereiten","parameters":{"jsCode":"// Funktion zum „JSON-sicher“ machen eines Strings\nfunction sanitizeForJson(s) {\n  if (typeof s !== 'string') {\n    s = String(s ?? '');\n  }\n\n  // C0-Steuerzeichen entfernen, aber \\n und \\t erlauben\n  // (0x00–0x1F & 0x7F), außer \\n (0x0A) und \\t (0x09)\n  s = s.replace(/[\\u0000-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F]/g, '');\n\n  // Unicode Line/Paragraph Separator → normale Zeilenumbrüche\n  s = s.replace(/\\u2028|\\u2029/g, '\\n');\n\n  // Unpaare Surrogate ersetzen (können JSON/UTF-8 killen)\n  s = s.replace(/[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?<![\\uD800-\\uDBFF])[\\uDC00-\\uDFFF]/g, '�');\n\n  // Doppelte Leerzeichen rund um Zeilenumbrüche entschärfen\n  s = s.replace(/[ \\t]+\\n/g, '\\n');\n\n  return s;\n}\n\n// 1) Text aus vorherigem Node holen\nconst raw = $input.first().json;\n// kompletter JSON-Output des AI-Nodes\n\n// 2) Text extrahieren\nconst rawText = raw.content[0].text;\n\n// 3) Sanitizen\nconst inputText = sanitizeForJson(rawText);\n\n// 4) Ergebnis zurückgeben\nreturn [\n  {\n    json: {\n      text: JSON.stringify(inputText),\n    },\n  },\n];"},"position":[3584,576],"type":"n8n-nodes-base.code","typeVersion":2}],"settings":{"availableInMCP":false,"callerPolicy":"workflowsFromSameOwner","executionOrder":"v1"}}